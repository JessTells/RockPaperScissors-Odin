const svgRock = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.01 14.577a3.867 3.867 0 0 0 .99-2.522c0-2.09-1.862-3.9-4.652-4.649a2.636 2.636 0 0 0-.045-.985A2.82 2.82 0 0 0 18 4.011C18 2.322 16.133 1 13.75 1a4.307 4.307 0 0 0-4.015 2.047c-2.919.25-5.11 1.906-5.11 3.98a3.624 3.624 0 0 0 2 3.037A3.681 3.681 0 0 0 6 12.055c0 .076.012.151.017.227-.51.322-1 .627-1.462.859-.23.114-.446.215-.649.311C2.1 14.3 1 14.978 1 18.088 1 22.44 4.741 23 8 23a71.591 71.591 0 0 0 8.916-.376c1.5-.2 6.084-.789 6.084-3.61 0-3.023-1.584-3.864-2.99-4.437zM13.75 3c1.924 0 3.376 1.29.979 1.9-1.717.428-3.229-.376-3.229-.892 0-.354.854-1.008 2.25-1.008zm-4 2.052c.765 1.52 2.909 2.11 4.622 1.939.1 1.206-2.268 2.053-3.874 2.053-1.408 0-3.875-.73-3.875-2.017.002-.841 1.297-1.77 3.129-1.975zm.748 5.992a6.825 6.825 0 0 0 4.928-1.806C17.5 9.688 19 10.846 19 12.055a2.562 2.562 0 0 1-1.48 2.012c-4.065 2.468-11.6-.257-8.992-3.252a8.534 8.534 0 0 0 1.972.229zm6.159 9.6A70.429 70.429 0 0 1 8 21c-4.2 0-5-1.023-5-2.911 0-2.793.65-1.975 3.707-3.876C8.867 17.343 14.72 17.842 18.2 16c.257.115.511.215.759.314 1.361.54 2.045.811 2.045 2.7-.004.394-.918 1.186-4.345 1.626zM12 19a1 1 0 0 1-1 1H8a1 1 0 0 1 0-2h3a1 1 0 0 1 1 1z"/></svg>';
const svgPaper = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M41 0H11a1 1 0 0 0-1 1v3H7a1 1 0 0 0-1 1v42a1 1 0 0 0 1 1h30a1 1 0 0 0 1-1v-3h3a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1zm-5 46H8V6h20v7a1 1 0 0 0 1 1h7zM30 7.41 34.59 12H30zM40 42h-2c0-31 .14-29.28-.29-29.71C29.08 3.66 29.61 4 29.06 4H12V2h28z"/><path d="M32 22H12a1 1 0 0 0 0 2h20a1 1 0 0 0 0-2zM32 17H12a1 1 0 0 0 0 2h20a1 1 0 0 0 0-2zM32 27H12a1 1 0 0 0 0 2h20a1 1 0 0 0 0-2zM32 32H12a1 1 0 0 0 0 2h20a1 1 0 0 0 0-2zM22 37H12a1 1 0 0 0 0 2h10a1 1 0 0 0 0-2z"/></svg>';
const svgScissors = '<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><path d="M112.437 87.271a21.484 21.484 0 0 0-37.85-1.748l-3.055-4.887 2.546-1.592a1.751 1.751 0 0 0 .555-2.413l-.96-1.533 29.982-47.962a11.919 11.919 0 0 0 1.521-9.016v-.012a11.988 11.988 0 0 0-5.286-7.422 4.475 4.475 0 0 0-6.184 1.414L64 59.62 34.3 12.107a4.477 4.477 0 0 0-6.2-1.416 11.933 11.933 0 0 0-3.758 16.447L54.325 75.1l-.958 1.533a1.751 1.751 0 0 0 .555 2.413l2.546 1.592-3.055 4.887a21.489 21.489 0 1 0-.249 22.385L64 90.572l10.835 17.335a21.5 21.5 0 0 0 14.544 9.777 21.246 21.246 0 0 0 3.638.313 21.481 21.481 0 0 0 19.42-30.726zM27.315 25.284a8.432 8.432 0 0 1 2.652-11.63.976.976 0 0 1 1.359.3l30.611 48.968-5.548 8.878zM50.2 106.053a17.98 17.98 0 1 1 1.423-16.3 1.749 1.749 0 0 0 3.1.27l5.64-9.02a1.751 1.751 0 0 0-.556-2.412L57.263 77l39.414-63.047a.977.977 0 0 1 1.347-.3 8.433 8.433 0 0 1 2.662 11.634zm54.059 4.524a17.976 17.976 0 0 1-26.459-4.525L66.064 87.271l2.744-4.389 4.468 7.146a1.749 1.749 0 0 0 3.105-.27 17.982 17.982 0 1 1 27.874 20.819z"/><path d="M96.05 83.533a13.322 13.322 0 1 0 4.067 24.282 13.327 13.327 0 0 0-4.067-24.282zm2.213 21.313a9.825 9.825 0 1 1-10.415-16.662 9.742 9.742 0 0 1 5.185-1.5 9.909 9.909 0 0 1 2.229.256 9.828 9.828 0 0 1 3 17.9zM42.008 85.216a13.317 13.317 0 1 0 4.246 18.372 13.329 13.329 0 0 0-4.246-18.371zm1.278 16.517a9.829 9.829 0 1 1-10.548-14.791 9.833 9.833 0 0 1 10.548 14.791z"/><circle cx="64" cy="74.708" r="1.75"/></svg>';

const playBtnsDiv = document.getElementById("button-container");
const btnArray = Array.from(playBtnsDiv.children);

const btnRock = document.getElementById('rock');
const btnPaper = document.getElementById('paper');
const btnScissors = document.getElementById('scissors');
const btnReset = document.getElementById('reset-button');

const playerChoice = document.getElementById("player-choice");
const cpuChoice = document.getElementById("cpu-choice");
const result = document.getElementById("result");
const playerScoreSpan = document.getElementById("player-score");
const cpuScoreSpan = document.getElementById("cpu-score")
const announceWinner = document.getElementById("announce-winner");


var playerScore = 0;
var cpuScore = 0;

function getComputerChoice(){
    let choice = (Math.random() * (2 - 0 + 1) ) << 0;
    switch(choice){
        case 0: 
        cpuChoice.innerHTML = svgRock;
        console.log("CPU: " + "Rock");
        break;
        case 1: 
        cpuChoice.innerHTML = svgPaper;
        console.log("CPU: " + "Paper");
        break;
        case 2: 
        cpuChoice.innerHTML = svgScissors;
        console.log("CPU: " + "Scissors");
        break;
    }
    return choice;
}

function numToRPS(num){
    switch(num){
        case 0: 
        
        return "Rock";
        case 1: 
        
        return "Paper";
        case 2: 
        
        return "Scissors";
    }
}

function getPlayerChoice(choice){
    switch(choice){
        case "rock": 
        playerChoice.innerHTML = svgRock;
        return 0;

        case "paper":
        playerChoice.innerHTML = svgPaper; 
        return 1;

        case "scissors": 
        playerChoice.innerHTML = svgScissors;
        return 2;

        default: return "ERROR";
    }
}

function mainRound(playerChoice){
    let pChoice = getPlayerChoice(playerChoice);
    let cChoice = getComputerChoice();
    console.log("Player: " + playerChoice);

    if(pChoice === cChoice){
        result.textContent = "It is a tie!";
        announceWinner.textContent = numToRPS(pChoice) + " ties with " + numToRPS(pChoice);

    }else if(cChoice - 1 === pChoice || cChoice + 2 === pChoice){
        result.textContent = "You lose this round!";
        announceWinner.textContent = numToRPS(cChoice) + " beats " + numToRPS(pChoice);
        updateScore(cpuScoreSpan, ++cpuScore);

    }else {
        result.textContent = "You win the round!";
        announceWinner.textContent = numToRPS(pChoice) + " beats " + numToRPS(cChoice);
        updateScore(playerScoreSpan, ++playerScore);
    }

    if(playerScore >= 5){
        result.textContent = "You scored 5 points";
        announceWinner.textContent = "You win the game!"
        hideButtonsAndShowReset();
    }else if(cpuScore >= 5){
        result.textContent = "The CPU scored 5 points";
        announceWinner.textContent = "You lost the game!"
        hideButtonsAndShowReset();
    }
}

function updateScore(winnerSpan, score){
    winnerSpan.textContent = score;
}

btnArray.forEach((button) =>{
    button.addEventListener('click', () =>{
        if(button.id !== "reset-button"){
            mainRound(button.id);
        }
        
    });

});

function hideButtonsAndShowReset() {
    btnRock.style.display = 'none';
    btnPaper.style.display = 'none';
    btnScissors.style.display = 'none';
    btnReset.style.display = 'inline-block';
}

function resetGameAndHideReset() {
    btnRock.style.display = 'inline-block';
    btnPaper.style.display = 'inline-block';
    btnScissors.style.display = 'inline-block';
    btnReset.style.display = 'none';
    cpuScore = 0;
    playerScore = 0;
    playerChoice.textContent = "";
    cpuChoice.textContent = "";
    announceWinner.textContent = "An epic game of wits requires wise decisions...";
    result.textContent = "First to 5 points wins the game!"
    updateScore(cpuScoreSpan, cpuScore);
    updateScore(playerScoreSpan, playerScore);
}

btnReset.addEventListener('click', resetGameAndHideReset);