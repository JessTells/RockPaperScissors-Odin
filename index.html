<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <div id="score"></div>
    <div class="container">
        <button id="rock">Rock</button>
        <button id="paper">Paper</button>
        <button id="scissors">Scissors</button>
        <button id="reset-button" style="display: none;">Reset</button>
    </div>

    <div id="cpu-choice"></div>
    <div id="result"></div>
    <div id="announce-winner"></div>

    <script>
        const playBtns = document.querySelectorAll("button");

        const button1 = document.getElementById('rock');
        const button2 = document.getElementById('paper');
        const button3 = document.getElementById('scissors');
        const resetButton = document.getElementById('reset-button');
        
        const cpuChoice = document.getElementById("cpu-choice");
        const result = document.getElementById("result");
        const score = document.getElementById("score");
        const announceWinner = document.getElementById("announce-winner");
        

        var playerScore = 0;
        var cpuScore = 0;

        score.textContent = "Player Score: " + playerScore + " | Computer Score: " + cpuScore;

        function getComputerChoice(){
            let choice = (Math.random() * (2 - 0 + 1) ) << 0;
            console.log("Computer chose: " + numToRPS(choice));
            cpuChoice.textContent = "Computer chose: " + numToRPS(choice);
            return choice;
        }

        function numToRPS(num){
            switch(num){
                case 0: return "Rock";
                case 1: return "Paper";
                case 2: return "Scissors";
            }
        }

        function getPlayerChoice(choice){
            switch(choice){
                case "rock": return 0;
                case "paper": return 1;
                case "scissors": return 2;
                default: return "ERROR";
            }
        }

        function mainRound(playerChoice){
            let pChoice = getPlayerChoice(playerChoice);
            let cChoice = getComputerChoice();

            if(pChoice === cChoice){
                result.textContent = "Tie! You both chose " + numToRPS(pChoice);

            }else if(cChoice - 1 === pChoice || cChoice + 2 === pChoice){
                result.textContent = "You Lose The Round! " + numToRPS(cChoice) + " beats " + numToRPS(pChoice);
                cpuScore++;

            }else {
                result.textContent = "You Win The Round! " + numToRPS(pChoice) + " beats " + numToRPS(cChoice);
                playerScore++;

            }

            displayScore();

            if(playerScore >= 5){
                announceWinner.textContent = "You won the game!";
                hideButtonsAndShowReset();
            }else if(cpuScore >= 5){
                announceWinner.textContent = "The CPU won the game!";
                hideButtonsAndShowReset();
            }
        }

        function displayScore(){
            score.textContent = "Player Score: " + playerScore + " | Computer Score: " + cpuScore;
        }

        playBtns.forEach((button) =>{
            button.addEventListener('click', () =>{
                mainRound(button.id);
            });

        });

        function hideButtonsAndShowReset() {
            button1.style.display = 'none';
            button2.style.display = 'none';
            button3.style.display = 'none';
            resetButton.style.display = 'inline-block';
        }

        function resetGameAndHideReset() {
            button1.style.display = 'inline-block';
            button2.style.display = 'inline-block';
            button3.style.display = 'inline-block';
            resetButton.style.display = 'none';
            cpuScore = 0;
            playerScore = 0;
            displayScore();
        }

        resetButton.addEventListener('click', resetGameAndHideReset);

        
    </script>
</body>
</html>